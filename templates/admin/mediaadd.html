{% extends "../base.html" %}
 
{% block title  %}Add Post{% endblock %}

{% block headertitle %}Add Post{% endblock %}
 
{% block body %}
<form id="form" method="post" action="/admin/media/add" enctype="multipart/form-data">

<div class="form-group">
    <label for="file">Image</label>
    <input type="file" class="form-control" id="file" name="file" />
</div>

<div class="form-group row">
    <div class="col-sm-10">
        <button type="submit" id="but_upload" class="btn btn-primary">Submit</button>
    </div>
</div>
</form>
{% endblock %}

{% block script %}
<script>
$(document).ready(function() { 
    $("#form").on('submit',(function(e) {
        e.preventDefault();

        var fd = new FormData(); 
        var files = $('#file')[0].files[0]; 
        fd.append('file', files); 

        $.ajax({ 
            url: '/api/v1/putmedia/1', 
            type: 'post', 
            data: fd, 
            contentType: false, 
            cache: false,
            processData: false, 
            success: function(response){ 
                if(response != 0){ 
                   console.log('file uploaded'); 
                } 
                else{ 
                    console.log('file could not be uploaded'); 
                } 
            }, 
        }); 
    })); 
}); 
</script>
{% endblock %}

